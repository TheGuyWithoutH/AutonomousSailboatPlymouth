<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Autonomous Sailboat: Controller.h File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Autonomous Sailboat
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">Turning a RC laser model sail-boat into an autonomous sail-boat</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('de/d4a/Controller_8h.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">Controller.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Boat controller using a line-following method Header file.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="../../d2/d8f/Tools_8h_source.html">Tools.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d1/dd0/Messages_8h_source.html">Messages.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d9/dae/GPS_8h_source.html">GPS.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../df/d52/Rudder_8h_source.html">Rudder.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d7/dc9/Sail_8h_source.html">Sail.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for Controller.h:</div>
<div class="dyncontent">
<div class="center"><img src="../../dd/d8b/Controller_8h__incl.png" border="0" usemap="#Controller_8h" alt=""/></div>
<map name="Controller_8h" id="Controller_8h">
<area shape="rect" id="node2" href="../../d2/d8f/Tools_8h.html" title="Mathematical and Essentials Tools Header file. " alt="" coords="367,155,432,181"/>
<area shape="rect" id="node5" href="../../d1/dd0/Messages_8h.html" title="Feedback Header file. " alt="" coords="282,304,375,331"/>
<area shape="rect" id="node12" href="../../d9/dae/GPS_8h.html" title="GPS Header file. " alt="" coords="149,155,210,181"/>
<area shape="rect" id="node14" href="../../df/d52/Rudder_8h.html" title="Rudder Header file. " alt="" coords="743,155,818,181"/>
<area shape="rect" id="node16" href="../../d7/dc9/Sail_8h.html" title="Sail Header file. " alt="" coords="508,80,563,107"/>
<area shape="rect" id="node4" href="../../d4/d0c/Wiring_8h.html" title="Wiring table. " alt="" coords="359,229,429,256"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="../../d6/dfa/Controller_8h__dep__incl.png" border="0" usemap="#Controller_8hdep" alt=""/></div>
<map name="Controller_8hdep" id="Controller_8hdep">
<area shape="rect" id="node2" href="../../dc/d64/AutonomousSailboat_8ino.html" title="Main program. " alt="" coords="5,80,168,107"/>
<area shape="rect" id="node3" href="../../dd/da6/Controller_8cpp.html" title="Boat controller using a line&#45;following method Source file. " alt="" coords="193,80,295,107"/>
</map>
</div>
</div>
<p><a href="../../de/d4a/Controller_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ac3a0fffcd22f7bf2c11b237c59a23e84"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d4a/Controller_8h.html#ac3a0fffcd22f7bf2c11b237c59a23e84">ControllerSetup</a> (double <a class="el" href="../../de/d4a/Controller_8h.html#a7ed3f9ff7c1c597ad4ba479b8481c7c7">initialPath</a>[<a class="el" href="../../de/d4a/Controller_8h.html#ae5537df3b7d0b5fc5259b98c5bcb49a5">NB_POS_GPS</a>][2], double <a class="el" href="../../de/d4a/Controller_8h.html#a196416dfae9e574cfc2254beccfcdc48">newPath</a>[<a class="el" href="../../de/d4a/Controller_8h.html#ae5537df3b7d0b5fc5259b98c5bcb49a5">NB_POS_GPS</a>+1][2])</td></tr>
<tr class="separator:ac3a0fffcd22f7bf2c11b237c59a23e84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a656be7c4a59856af4ead87475677608d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d4a/Controller_8h.html#a656be7c4a59856af4ead87475677608d">Controller</a> (double <a class="el" href="../../dc/d64/AutonomousSailboat_8ino.html#a2e26e5d15cc57668cd316625fa9dea85">posActual</a>[2], double <a class="el" href="../../d7/d59/IMU_8h.html#ae024163074f229a06b7ea69b190e466d">heading</a>, double windAngle, double posA[2], double posB[2], double *<a class="el" href="../../d0/d98/RcModule_8h.html#a1f9d261877b523491ecde3fa36e5acfd">rudder</a>, double *sail)</td></tr>
<tr class="separator:a656be7c4a59856af4ead87475677608d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2c6e41714e28a955457c35e2366fd9b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d4a/Controller_8h.html#ae2c6e41714e28a955457c35e2366fd9b">pathFollowing</a> (double <a class="el" href="../../de/d4a/Controller_8h.html#a196416dfae9e574cfc2254beccfcdc48">newPath</a>[<a class="el" href="../../de/d4a/Controller_8h.html#ae5537df3b7d0b5fc5259b98c5bcb49a5">NB_POS_GPS</a>+1][2], double <a class="el" href="../../dc/d64/AutonomousSailboat_8ino.html#a2e26e5d15cc57668cd316625fa9dea85">posActual</a>[2], int *<a class="el" href="../../de/d4a/Controller_8h.html#ac564f08c4d4cbfbc33936c74a5f4d022">p_token</a>)</td></tr>
<tr class="separator:ae2c6e41714e28a955457c35e2366fd9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ae5537df3b7d0b5fc5259b98c5bcb49a5"><td class="memItemLeft" align="right" valign="top">const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d4a/Controller_8h.html#ae5537df3b7d0b5fc5259b98c5bcb49a5">NB_POS_GPS</a> = 3</td></tr>
<tr class="separator:ae5537df3b7d0b5fc5259b98c5bcb49a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8abb7e972adc09624edab301e021dc5f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d4a/Controller_8h.html#a8abb7e972adc09624edab301e021dc5f">token</a></td></tr>
<tr class="separator:a8abb7e972adc09624edab301e021dc5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac564f08c4d4cbfbc33936c74a5f4d022"><td class="memItemLeft" align="right" valign="top">int *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d4a/Controller_8h.html#ac564f08c4d4cbfbc33936c74a5f4d022">p_token</a></td></tr>
<tr class="separator:ac564f08c4d4cbfbc33936c74a5f4d022"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9324389a5cdc532c6417a87ccafe18ce"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d4a/Controller_8h.html#a9324389a5cdc532c6417a87ccafe18ce">finished</a></td></tr>
<tr class="separator:a9324389a5cdc532c6417a87ccafe18ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93f22c00502876a938b640cafdfb94a0"><td class="memItemLeft" align="right" valign="top">bool *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d4a/Controller_8h.html#a93f22c00502876a938b640cafdfb94a0">p_finished</a></td></tr>
<tr class="separator:a93f22c00502876a938b640cafdfb94a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ed3f9ff7c1c597ad4ba479b8481c7c7"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d4a/Controller_8h.html#a7ed3f9ff7c1c597ad4ba479b8481c7c7">initialPath</a> [<a class="el" href="../../de/d4a/Controller_8h.html#ae5537df3b7d0b5fc5259b98c5bcb49a5">NB_POS_GPS</a>][2]</td></tr>
<tr class="separator:a7ed3f9ff7c1c597ad4ba479b8481c7c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a196416dfae9e574cfc2254beccfcdc48"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d4a/Controller_8h.html#a196416dfae9e574cfc2254beccfcdc48">newPath</a> [<a class="el" href="../../de/d4a/Controller_8h.html#ae5537df3b7d0b5fc5259b98c5bcb49a5">NB_POS_GPS</a>+1][2]</td></tr>
<tr class="separator:a196416dfae9e574cfc2254beccfcdc48"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Boat controller using a line-following method Header file. </p>
<p>Sail-boat controller for autonomous sail-boat - annotated version Algorithm: <a href="https://www.ensta-bretagne.fr/jaulin/paper_jaulin_irsc12.pdf">https://www.ensta-bretagne.fr/jaulin/paper_jaulin_irsc12.pdf</a></p>
<p>This controller is realized with approximations like the fact that locally the earth is flat This approximation works as long as the boat's journey does not exceed 100km, if it does, you need to change the way the GPS coordinates are flatten (see in <a class="el" href="../../d9/dae/GPS_8h.html" title="GPS Header file. ">GPS.h</a>/.cpp files) </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a656be7c4a59856af4ead87475677608d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a656be7c4a59856af4ead87475677608d">&#9670;&nbsp;</a></span>Controller()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Controller </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>posActual</em>[2], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>heading</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>windAngle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>posA</em>[2], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>posB</em>[2], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>rudder</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>sail</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Controller for the line-following of the sail-boat:</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">posActual</td><td>Actual GPS position in the local reference ([2] table) </td></tr>
    <tr><td class="paramname">heading</td><td>Angle between the boat and the North </td></tr>
    <tr><td class="paramname">windAngle</td><td>Angle from which the wind comes (with reference to the North) </td></tr>
    <tr><td class="paramname">posA</td><td>Former position of the aim </td></tr>
    <tr><td class="paramname">posB</td><td>New aim </td></tr>
    <tr><td class="paramname">rudder</td><td>Pointer to give the rudder's command </td></tr>
    <tr><td class="paramname">sail</td><td>Pointer to give the sail's command </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac3a0fffcd22f7bf2c11b237c59a23e84"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3a0fffcd22f7bf2c11b237c59a23e84">&#9670;&nbsp;</a></span>ControllerSetup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ControllerSetup </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>initialPath</em>[NB_POS_GPS][2], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>newPath</em>[NB_POS_GPS+1][2]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialization of the line-following algorithm: loading the Path and changing the reference to a local one</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">initialPath</td><td>Initial table containing the list of way-points ([NB_POS_GPS]x[2] table) </td></tr>
    <tr><td class="paramname">newPath</td><td>Final table containing the list corrected of way-points ([NB_POS_GPS + 1]x[2] table) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae2c6e41714e28a955457c35e2366fd9b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2c6e41714e28a955457c35e2366fd9b">&#9670;&nbsp;</a></span>pathFollowing()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pathFollowing </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>newPath</em>[NB_POS_GPS+1][2], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>posActual</em>[2], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>p_token</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Program which allows to follow a Path by changing the aim as we go along</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">newPath</td><td>Table containing the list corrected of way-points ([NB_POS_GPS + 1]x[2] table) </td></tr>
    <tr><td class="paramname">posActual</td><td>Actual GPS position in the local reference ([2] table) </td></tr>
    <tr><td class="paramname">p_token</td><td>Token to indicate which way-point to aim </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a9324389a5cdc532c6417a87ccafe18ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9324389a5cdc532c6417a87ccafe18ce">&#9670;&nbsp;</a></span>finished</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool finished</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a7ed3f9ff7c1c597ad4ba479b8481c7c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ed3f9ff7c1c597ad4ba479b8481c7c7">&#9670;&nbsp;</a></span>initialPath</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double initialPath[<a class="el" href="../../de/d4a/Controller_8h.html#ae5537df3b7d0b5fc5259b98c5bcb49a5">NB_POS_GPS</a>][2]</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ae5537df3b7d0b5fc5259b98c5bcb49a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5537df3b7d0b5fc5259b98c5bcb49a5">&#9670;&nbsp;</a></span>NB_POS_GPS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const int NB_POS_GPS = 3</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a196416dfae9e574cfc2254beccfcdc48"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a196416dfae9e574cfc2254beccfcdc48">&#9670;&nbsp;</a></span>newPath</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double newPath[<a class="el" href="../../de/d4a/Controller_8h.html#ae5537df3b7d0b5fc5259b98c5bcb49a5">NB_POS_GPS</a>+1][2]</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a93f22c00502876a938b640cafdfb94a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a93f22c00502876a938b640cafdfb94a0">&#9670;&nbsp;</a></span>p_finished</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool * p_finished</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ac564f08c4d4cbfbc33936c74a5f4d022"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac564f08c4d4cbfbc33936c74a5f4d022">&#9670;&nbsp;</a></span>p_token</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int * p_token</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a8abb7e972adc09624edab301e021dc5f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8abb7e972adc09624edab301e021dc5f">&#9670;&nbsp;</a></span>token</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int token</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_7a83d12fdb8ff3ce357ab9aaf0d2ebec.html">AutonomousSailboat</a></li><li class="navelem"><a class="el" href="../../de/d4a/Controller_8h.html">Controller.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
